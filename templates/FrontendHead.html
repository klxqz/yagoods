<!-- Yandex.Metrika counter -->
<script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript"></script>
<script type="text/javascript">
    var yaInitParams = {
            id: '{$settings.counter_id|escape}',
            webvisor: {if !empty($settings.webvisor)}true{else}false{/if},
            clickmap: {if !empty($settings.clickmap)}true{else}false{/if},
            trackLinks: {if !empty($settings.trackLinks)}true{else}false{/if},
            accurateTrackBounce: {if !empty($settings.trackLinks)}true{else}false{/if},
            ut: {if !empty($settings.ut)}"noindex"{else}0{/if},
            trackHash: {if !empty($settings.trackHash)}true{else}false{/if}
        };
        
    {if !empty($settings.async)}
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function () {
            try {
                w.yaCounter{$settings.counter_id|escape} = new Ya.Metrika(yaInitParams);
            } catch (e) {
            }
        });

        var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () {
                    n.parentNode.insertBefore(s, n);
                };
        s.type = "text/javascript";
        s.async = true;
        s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else {
            f();
        }
    })(document, window, "yandex_metrika_callbacks");
    {else}
    try {
        var yaCounter{$settings.counter_id|escape} = new Ya.Metrika(yaInitParams);
    } catch (e) {
    }
    {/if}
</script>
<noscript><div><img src="//mc.yandex.ru/watch/{$settings.counter_id|escape}" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->